# DiagPro Car Maintenance Center Backend API

Ù…Ø±ÙƒØ² Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª - ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ©

## ğŸŒŸ Features / Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

### Core Functionality / Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- âœ… **Bookings Management** / Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- âœ… **Services Management** / Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª
- âœ… **Customer Management** / Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
- âœ… **Payment Gateway Integration (Moyasar)** / ØªÙƒØ§Ù…Ù„ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ (Ù…ÙŠØ³Ø±)
- âœ… **Smart Assistant for Fault Prediction** / Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø§Ù„Ø£Ø¹Ø·Ø§Ù„

### Technical Features / Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©
- âœ… **Arabic RTL Support** / Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø±
- âœ… **Bilingual API (Arabic/English)** / ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ©
- âœ… **RESTful API Design** / ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª RESTful
- âœ… **MongoDB Database Integration** / ØªÙƒØ§Ù…Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª MongoDB
- âœ… **Request Validation** / Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- âœ… **Error Handling** / Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- âœ… **Security Middleware** / Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„ÙˆØ³Ø·ÙŠØ©
- âœ… **Rate Limiting** / ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- âœ… **Logging** / Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„

## ğŸš€ Quick Start / Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹

### Prerequisites / Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³Ø¨Ù‚Ø©
- Node.js >= 16.0.0
- MongoDB >= 4.4
- npm >= 8.0.0

### Installation / Ø§Ù„ØªØ«Ø¨ÙŠØª

1. **Clone the repository / Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹**
```bash
git clone https://github.com/Admindiagpro/DiagPro-website.git
cd DiagPro-website
```

2. **Install dependencies / ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª**
```bash
npm install
```

3. **Setup environment variables / Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©**
```bash
cp .env.example .env
# Edit .env with your configuration
```

4. **Start MongoDB / ØªØ´ØºÙŠÙ„ MongoDB**
```bash
# Using Docker
docker run -d -p 27017:27017 --name diagpro-mongo mongo:latest

# Or start your local MongoDB service
```

5. **Seed the database (optional) / Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)**
```bash
npm run seed
```

6. **Start the server / ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…**
```bash
# Development mode / ÙˆØ¶Ø¹ Ø§Ù„ØªØ·ÙˆÙŠØ±
npm run dev

# Production mode / ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
npm start
```

## ğŸ“š API Endpoints / Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª

### Core Endpoints / Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- `GET /health` - Health check / ÙØ­Øµ Ø§Ù„ØµØ­Ø©
- `GET /` - API information / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª

### Customers / Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
- `GET /api/customers` - List customers / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
- `POST /api/customers` - Create customer / Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„
- `GET /api/customers/:id` - Get customer / Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù…ÙŠÙ„
- `PUT /api/customers/:id` - Update customer / ØªØ­Ø¯ÙŠØ« Ø¹Ù…ÙŠÙ„
- `DELETE /api/customers/:id` - Delete customer / Ø­Ø°Ù Ø¹Ù…ÙŠÙ„

### Services / Ø§Ù„Ø®Ø¯Ù…Ø§Øª
- `GET /api/services` - List services / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª
- `POST /api/services` - Create service / Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø¯Ù…Ø©
- `GET /api/services/:id` - Get service / Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø©
- `PUT /api/services/:id` - Update service / ØªØ­Ø¯ÙŠØ« Ø®Ø¯Ù…Ø©
- `GET /api/services/popular` - Popular services / Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Bookings / Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- `GET /api/bookings` - List bookings / Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- `POST /api/bookings` - Create booking / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø²
- `GET /api/bookings/:id` - Get booking / Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø¬Ø²
- `PUT /api/bookings/:id` - Update booking / ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ø²
- `PATCH /api/bookings/:id/status` - Update status / ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
- `GET /api/bookings/available-slots` - Available slots / Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©

### Payments / Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
- `POST /api/payments/create` - Create payment / Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØ¹Ø©
- `GET /api/payments/status/:bookingId` - Payment status / Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹
- `POST /api/payments/refund/:bookingId` - Process refund / Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯
- `GET /api/payments/methods` - Payment methods / Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹

### Smart Assistant / Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
- `POST /api/assistant/predict-faults` - Predict faults / Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø§Ù„Ø£Ø¹Ø·Ø§Ù„
- `POST /api/assistant/chat` - Chat with assistant / Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯
- `POST /api/assistant/analyze-symptoms` - Analyze symptoms / ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶
- `GET /api/assistant/maintenance-schedule/:vehicleId` - Maintenance schedule / Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø©

## ğŸ”§ Configuration / Ø§Ù„ØªÙƒÙˆÙŠÙ†

### Environment Variables / Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©

| Variable | Description | Default |
|----------|-------------|---------|
| `NODE_ENV` | Environment | development |
| `PORT` | Server port | 3000 |
| `MONGODB_URI` | MongoDB connection string | mongodb://localhost:27017/diagpro |
| `MOYASAR_API_KEY` | Moyasar payment gateway API key | - |
| `JWT_SECRET` | JWT secret for authentication | - |

## ğŸŒ Arabic RTL Support / Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø±

The API provides full Arabic RTL support:
- Arabic field names and descriptions / Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø£ÙˆØµØ§Ù Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
- RTL-aware responses / Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø±
- Language detection via headers / ÙƒØ´Ù Ø§Ù„Ù„ØºØ© Ø¹Ø¨Ø± Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
- Bilingual error messages / Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ©

### Usage Examples / Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

```bash
# English response
curl -H "Accept-Language: en" http://localhost:3000/

# Arabic response / Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¹Ø±Ø¨ÙŠØ©
curl -H "Accept-Language: ar" http://localhost:3000/
```

## ğŸ› ï¸ Development / Ø§Ù„ØªØ·ÙˆÙŠØ±

### Scripts / Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØ§Øª
```bash
npm run dev        # Start development server / ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… Ø§Ù„ØªØ·ÙˆÙŠØ±
npm run start      # Start production server / ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… Ø§Ù„Ø¥Ù†ØªØ§Ø¬
npm run test       # Run tests / ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
npm run lint       # Run linter / ØªØ´ØºÙŠÙ„ ÙØ§Ø­Øµ Ø§Ù„ÙƒÙˆØ¯
npm run seed       # Seed database / Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
```

### Project Structure / Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
```
src/
â”œâ”€â”€ config/         # Configuration files / Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ†
â”œâ”€â”€ controllers/    # Route controllers / ÙˆØ­Ø¯Ø§Øª ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
â”œâ”€â”€ middleware/     # Custom middleware / Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„ÙˆØ³Ø·ÙŠØ© Ø§Ù„Ù…Ø®ØµØµØ©
â”œâ”€â”€ models/         # Database models / Ù†Ù…Ø§Ø°Ø¬ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”œâ”€â”€ routes/         # API routes / Ù…Ø³Ø§Ø±Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª
â”œâ”€â”€ services/       # Business logic / Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
â”œâ”€â”€ utils/          # Utility functions / ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
â””â”€â”€ validators/     # Input validators / Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
```

---

**DiagPro Team** / ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ  
ğŸš— Making car maintenance smarter / Ù†Ø¬Ø¹Ù„ ØµÙŠØ§Ù†Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø£Ø°ÙƒÙ‰
